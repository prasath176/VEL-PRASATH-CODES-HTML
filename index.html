<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather App Simulator</title>
  <style>
   body{
    text-align: center;
   }
  </style>
</head>
<body>
  <h2> Weather App Simulator</h2>
  <button id="sequentialBtn">Fetch Sequentially</button>
  <button id="parallelBtn">Fetch in Parallel</button>
  <div id="output"></div>

  <script>
  
    function getWeather(city) {
      return new Promise((resolve, reject) => {
        const delay = Math.random() * 3000 + 1000; 
        setTimeout(() => {
          const success = Math.random() > 0.2; 
          if (success) {
            const temperature = (Math.random() * 15 + 20).toFixed(1);
            resolve(` ${city}: ${temperature}Â°C`);
          } else {
            reject(` Failed to fetch weather for ${city}`);
          }
        }, delay);
      });
    }

    const cities = ["Chennai", "Bangalore", "Mumbai", "Delhi"];

    
    async function fetchSequential() {
      const output = document.getElementById("output");
      output.innerHTML = "<p>Fetching weather sequentially...</p>";

      for (const city of cities) {
        try {
          const result = await getWeather(city);
          output.innerHTML += `<div class="city">${result}</div>`;
        } catch (error) {
          output.innerHTML += `<div class="city">${error}</div>`;
        }
      }

      output.innerHTML += "<p> Sequential fetching complete!</p>";
    }

    
    async function fetchParallel() {
      const output = document.getElementById("output");
      output.innerHTML = "<p>Fetching weather in parallel...</p>";

      try {
        const results = await Promise.allSettled(cities.map(city => getWeather(city)));
        results.forEach((res, i) => {
          if (res.status === "fulfilled") {
            output.innerHTML += `<div class="city">${res.value}</div>`;
          } else {
            output.innerHTML += `<div class="city">${res.reason}</div>`;
          }
        });
        output.innerHTML += "<p> Parallel fetching complete!</p>";
      } catch (error) {
        output.innerHTML += `<p>${error}</p>`;
      }
    }

    document.getElementById("sequentialBtn").addEventListener("click", fetchSequential);
    document.getElementById("parallelBtn").addEventListener("click", fetchParallel);
  </script>
</body>
</html>